(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["uni_modules-uni-id-pages-pages-userinfo-userinfo"],{"03ae":function(e,n,t){"use strict";(function(e,i){t("7a82");var a=t("4ea4").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("d3b7");var o=a(t("c7eb")),u=a(t("1da1")),r=e.database(),c=(r.collection("uni-id-users"),e.importObject("uni-id-co")),s={emits:["success"],computed:{},data:function(){return{}},methods:{beforeGetphonenumber:function(){return(0,u.default)((0,o.default)().mark((function n(){return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(n,t){uni.showLoading({mask:!0}),wx.checkSession({success:function(){n(),uni.hideLoading()},fail:function(){wx.login({success:function(a){var o=a.code;e.importObject("uni-id-co",{customUI:!0}).loginByWeixin({code:o}).then((function(e){n()})).catch((function(e){i("log",e," at uni_modules/uni-id-pages/components/uni-id-pages-bind-mobile/uni-id-pages-bind-mobile.vue:46"),t()})).finally((function(e){uni.hideLoading()}))},fail:function(e){i("error",e," at uni_modules/uni-id-pages/components/uni-id-pages-bind-mobile/uni-id-pages-bind-mobile.vue:53"),t()}})}})}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},bindMobileByMpWeixin:function(e){var n=this;return(0,u.default)((0,o.default)().mark((function t(){return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("getPhoneNumber:ok"!=e.detail.errMsg){t.next=6;break}return t.next=3,n.beforeGetphonenumber();case 3:c.bindMobileByMpWeixin(e.detail).then((function(e){n.$emit("success")})).finally((function(e){n.closeMe()})),t.next=7;break;case 6:n.closeMe();case 7:case"end":return t.stop()}}),t)})))()},open:function(){var e=this;return(0,u.default)((0,o.default)().mark((function n(){return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$refs.popup.open();case 1:case"end":return n.stop()}}),n)})))()},closeMe:function(e){this.$refs.popup.close()}}};n.default=s}).call(this,t("a9ff")["default"],t("0de9")["log"])},"051b":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return i}));var i={uniIdPagesAvatar:t("35d6").default,uniList:t("b52a").default,uniListItem:t("53f0").default,uniPopup:t("ff6d").default,uniPopupDialog:t("1bd02").default,uniIdPagesBindMobile:t("910e").default},a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",{staticClass:"uni-content"},[t("v-uni-view",{staticClass:"avatar"},[t("uni-id-pages-avatar",{attrs:{width:"260rpx",height:"260rpx"}})],1),t("uni-list",[t("uni-list-item",{staticClass:"item",attrs:{title:"昵称",rightText:e.userInfo.nickname||"未设置",link:!0},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.setNickname("")}}}),t("uni-list-item",{staticClass:"item",attrs:{title:"手机号",rightText:e.userInfo.mobile||"未绑定",link:!0},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.bindMobile.apply(void 0,arguments)}}}),e.userInfo.email?t("uni-list-item",{staticClass:"item",attrs:{title:"电子邮箱",rightText:e.userInfo.email}}):e._e(),e.hasPwd?t("uni-list-item",{staticClass:"item",attrs:{title:"修改密码",link:!0},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.changePassword.apply(void 0,arguments)}}}):e._e()],1),t("uni-list",{staticClass:"mt10"},[t("uni-list-item",{attrs:{title:"注销账号",link:"navigateTo"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.deactivate.apply(void 0,arguments)}}})],1),t("uni-popup",{ref:"dialog",attrs:{type:"dialog"}},[t("uni-popup-dialog",{attrs:{mode:"input",value:e.userInfo.nickname,inputType:e.setNicknameIng?"nickname":"text",title:"设置昵称",placeholder:"请输入要设置的昵称"},on:{confirm:function(n){arguments[0]=n=e.$handleEvent(n),e.setNickname.apply(void 0,arguments)}}})],1),t("uni-id-pages-bind-mobile",{ref:"bind-mobile-by-sms",on:{success:function(n){arguments[0]=n=e.$handleEvent(n),e.bindMobileSuccess.apply(void 0,arguments)}}}),e.showLoginManage?[e.userInfo._id?t("v-uni-button",{on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.logout.apply(void 0,arguments)}}},[e._v("退出登录")]):t("v-uni-button",{on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.login.apply(void 0,arguments)}}},[e._v("去登录")])]:e._e()],2)},o=[]},"0b8a":function(e,n,t){var i=t("8183");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=t("4f06").default;a("f12e66a0",i,!0,{sourceMap:!1,shadowMode:!1})},3832:function(e,n,t){"use strict";var i=t("0b8a"),a=t.n(i);a.a},"404b":function(e,n,t){"use strict";t.r(n);var i=t("03ae"),a=t.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(o);n["default"]=a.a},4936:function(e,n,t){var i=t("24fb");n=i(!1),n.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.input-box[data-v-accfeb5e]  .uni-input-input[type="password"]::-ms-reveal{display:none}.uni-content[data-v-accfeb5e]{padding:0 %?60?%}.login-logo[data-v-accfeb5e]{display:none}@media screen and (min-width:690px){.uni-content[data-v-accfeb5e]{margin:0 auto;position:relative;top:100px;padding:30px 40px 80px 40px;max-width:450px;max-height:450px;border-radius:10px;box-shadow:0 0 20px #efefef;background-color:#fff}.login-logo[data-v-accfeb5e]{display:flex;justify-content:center}.login-logo uni-image[data-v-accfeb5e]{width:60px;height:60px}.register-back[data-v-accfeb5e]{display:none}uni-button[data-v-accfeb5e]{padding-bottom:1px}}.uni-content uni-view[data-v-accfeb5e]{box-sizing:border-box}.title[data-v-accfeb5e]{display:flex;padding:18px 0;font-weight:800;flex-direction:column}.tip[data-v-accfeb5e]{display:flex;color:#bdbdc0;font-size:11px;margin:6px 0}.uni-content[data-v-accfeb5e]  .uni-easyinput__content,\n.input-box[data-v-accfeb5e]{height:44px;background-color:#f8f8f8!important;border-radius:0;font-size:14px;display:flex;flex:1}.link[data-v-accfeb5e]{color:#04498c;cursor:pointer}.uni-content[data-v-accfeb5e]  .uni-forms-item__inner{padding-bottom:8px}.uni-btn[data-v-accfeb5e]{text-align:center;height:40px;line-height:40px;margin:15px 0 10px 0;color:#fff!important;border-radius:5px;font-size:16px}.uni-body.uni_modules-uni-id-pages-pages-login-login-withoutpwd[data-v-accfeb5e]{height:auto!important}uni-view[data-v-accfeb5e]{display:flex}.box[data-v-accfeb5e]{background-color:#fff;height:200px;width:%?750?%;flex-direction:column;border-top-left-radius:15px;border-top-right-radius:15px}.headBox[data-v-accfeb5e]{padding:%?20?%;height:%?80?%;line-height:%?80?%;text-align:left;font-size:16px;color:#333;margin-left:%?15?%}.tip[data-v-accfeb5e]{color:#666;text-align:left;justify-content:center;margin:%?10?% %?30?%;font-size:18px}.btnBox[data-v-accfeb5e]{margin-top:%?45?%;justify-content:center;flex-direction:row}.close[data-v-accfeb5e],\n.agree[data-v-accfeb5e]{text-align:center;width:%?200?%;height:%?80?%;line-height:%?80?%;border-radius:5px;margin:0 %?20?%;font-size:14px}.close[data-v-accfeb5e]{color:#999;border-color:#eee;border-style:solid;border-width:1px;background-color:#fff}.close[data-v-accfeb5e]:active{color:#989898;background-color:#e2e2e2}.agree[data-v-accfeb5e]{color:#fff}.agree[data-v-accfeb5e]:active{background-color:#f5f5f6}',""]),e.exports=n},8183:function(e,n,t){var i=t("24fb");n=i(!1),n.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.input-box[data-v-088aa68e]  .uni-input-input[type="password"]::-ms-reveal{display:none}.uni-content[data-v-088aa68e]{padding:0 %?60?%}.login-logo[data-v-088aa68e]{display:none}@media screen and (min-width:690px){.uni-content[data-v-088aa68e]{margin:0 auto;position:relative;top:100px;padding:30px 40px 80px 40px;max-width:450px;max-height:450px;border-radius:10px;box-shadow:0 0 20px #efefef;background-color:#fff}.login-logo[data-v-088aa68e]{display:flex;justify-content:center}.login-logo uni-image[data-v-088aa68e]{width:60px;height:60px}.register-back[data-v-088aa68e]{display:none}uni-button[data-v-088aa68e]{padding-bottom:1px}}.uni-content uni-view[data-v-088aa68e]{box-sizing:border-box}.title[data-v-088aa68e]{display:flex;padding:18px 0;font-weight:800;flex-direction:column}.tip[data-v-088aa68e]{display:flex;color:#bdbdc0;font-size:11px;margin:6px 0}.uni-content[data-v-088aa68e]  .uni-easyinput__content,\n.input-box[data-v-088aa68e]{height:44px;background-color:#f8f8f8!important;border-radius:0;font-size:14px;display:flex;flex:1}.link[data-v-088aa68e]{color:#04498c;cursor:pointer}.uni-content[data-v-088aa68e]  .uni-forms-item__inner{padding-bottom:8px}.uni-btn[data-v-088aa68e]{text-align:center;height:40px;line-height:40px;margin:15px 0 10px 0;color:#fff!important;border-radius:5px;font-size:16px}.uni-body.uni_modules-uni-id-pages-pages-login-login-withoutpwd[data-v-088aa68e]{height:auto!important}.uni-content[data-v-088aa68e]{padding:0}uni-view[data-v-088aa68e]{display:flex;box-sizing:border-box;flex-direction:column}@media screen and (min-width:690px){.uni-content[data-v-088aa68e]{padding:0;max-width:690px;margin-left:calc(50% - 345px);border:none;max-height:none;border-radius:0;box-shadow:none}}.avatar[data-v-088aa68e]{align-items:center;justify-content:center;margin:22px 0;width:100%}.item[data-v-088aa68e]{flex:1;flex-direction:row;justify-content:space-between;align-items:center}uni-button[data-v-088aa68e]{margin:10%;margin-top:40px;border-radius:0;background-color:#fff;width:80%}.mt10[data-v-088aa68e]{margin-top:10px}',""]),e.exports=n},8871:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return i}));var i={uniPopup:t("ff6d").default},a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("uni-popup",{ref:"popup",attrs:{type:"bottom"}},[t("v-uni-view",{staticClass:"box"},[t("v-uni-text",{staticClass:"headBox"},[e._v("绑定资料")]),t("v-uni-text",{staticClass:"tip"},[e._v("将一键获取你的手机号码绑定你的个人资料")]),t("v-uni-view",{staticClass:"btnBox"},[t("v-uni-text",{staticClass:"close",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.closeMe.apply(void 0,arguments)}}},[e._v("关闭")]),t("v-uni-button",{staticClass:"agree uni-btn",attrs:{type:"primary","open-type":"getPhoneNumber"},on:{getphonenumber:function(n){arguments[0]=n=e.$handleEvent(n),e.bindMobileByMpWeixin.apply(void 0,arguments)}}},[e._v("获取")])],1)],1)],1)},o=[]},"8d14":function(e,n,t){"use strict";t.r(n);var i=t("051b"),a=t("ee5f");for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);t("3832");var u=t("f0c5"),r=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"088aa68e",null,!1,i["a"],void 0);n["default"]=r.exports},"8da3":function(e,n,t){var i=t("4936");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=t("4f06").default;a("33ce15b6",i,!0,{sourceMap:!1,shadowMode:!1})},"910e":function(e,n,t){"use strict";t.r(n);var i=t("8871"),a=t("404b");for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);t("baf4");var u=t("f0c5"),r=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"accfeb5e",null,!1,i["a"],void 0);n["default"]=r.exports},9179:function(e,n,t){"use strict";(function(e,i){t("7a82");var a=t("4ea4").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("d3b7");var o=a(t("c7eb")),u=a(t("1da1")),r=t("225c"),c=e.importObject("uni-id-co"),s={computed:{userInfo:function(){return r.store.userInfo},realNameStatus:function(){return this.userInfo.realNameAuth?this.userInfo.realNameAuth.authStatus:0}},data:function(){return{univerifyStyle:{authButton:{title:"本机号码一键绑定"},otherLoginButton:{title:"其他号码绑定"}},hasPwd:!1,showLoginManage:!1,setNicknameIng:!1}},onShow:function(){var e=this;return(0,u.default)((0,o.default)().mark((function n(){return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.univerifyStyle.authButton.title="本机号码一键绑定",e.univerifyStyle.otherLoginButton.title="其他号码绑定";case 2:case"end":return n.stop()}}),n)})))()},onLoad:function(e){var n=this;return(0,u.default)((0,o.default)().mark((function t(){var i;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showLoginManage&&(n.showLoginManage=!0),t.next=3,c.getAccountInfo();case 3:i=t.sent,n.hasPwd=i.isPasswordSet;case 5:case"end":return t.stop()}}),t)})))()},methods:{login:function(){uni.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd",complete:function(e){}})},logout:function(){r.mutations.logout()},bindMobileSuccess:function(){r.mutations.updateUserInfo()},changePassword:function(){uni.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/change_pwd/change_pwd",complete:function(e){}})},bindMobile:function(){this.bindMobileBySmsCode()},univerify:function(){var e=this;uni.login({provider:"univerify",univerifyStyle:this.univerifyStyle,success:function(){var e=(0,u.default)((0,o.default)().mark((function e(n){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.bindMobileByUniverify(n.authResult).then((function(e){r.mutations.updateUserInfo()})).catch((function(e){i("log",e," at uni_modules/uni-id-pages/pages/userinfo/userinfo.vue:142")})).finally((function(e){uni.closeAuthView()}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),fail:function(n){i("log",n," at uni_modules/uni-id-pages/pages/userinfo/userinfo.vue:149"),"30002"!=n.code&&"30001"!=n.code||e.bindMobileBySmsCode()}})},bindMobileBySmsCode:function(){uni.navigateTo({url:"./bind-mobile/bind-mobile"})},setNickname:function(e){e?(r.mutations.updateUserInfo({nickname:e}),this.setNicknameIng=!1,this.$refs.dialog.close()):this.$refs.dialog.open()},deactivate:function(){uni.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/deactivate/deactivate"})},bindThirdAccount:function(n){var t=this;return(0,u.default)((0,o.default)().mark((function a(){var c,s;return(0,o.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(c=e.importObject("uni-id-co"),s={weixin:"wx_openid",alipay:"ali_openid",apple:"apple_openid",qq:"qq_openid"}[n.toLowerCase()],!t.userInfo[s]){a.next=9;break}return a.next=5,c["unbind"+n]();case 5:return a.next=7,r.mutations.updateUserInfo();case 7:a.next=10;break;case 9:uni.login({provider:n.toLowerCase(),onlyAuthorize:!0,success:function(){var e=(0,u.default)((0,o.default)().mark((function e(t){var i;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["bind"+n]({code:t.code});case 2:return i=e.sent,i.errCode&&uni.showToast({title:i.errMsg||"绑定失败",duration:3e3}),e.next=6,r.mutations.updateUserInfo();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),fail:function(){var e=(0,u.default)((0,o.default)().mark((function e(n){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i("log",n," at uni_modules/uni-id-pages/pages/userinfo/userinfo.vue:206"),uni.hideLoading();case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});case 10:case"end":return a.stop()}}),a)})))()},realNameVerify:function(){uni.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/realname-verify/realname-verify"})}}};n.default=s}).call(this,t("a9ff")["default"],t("0de9")["log"])},baf4:function(e,n,t){"use strict";var i=t("8da3"),a=t.n(i);a.a},ee5f:function(e,n,t){"use strict";t.r(n);var i=t("9179"),a=t.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(o);n["default"]=a.a}}]);